# å¸ˆå¾’ä¼ æ‰¿ç³»ç»Ÿ (Master-Apprentice System) è®¾è®¡æ–‡æ¡£

**ç‰ˆæœ¬**: v1.0  
**çŠ¶æ€**: è®¾è®¡ä¸­  
**æœ€åæ›´æ–°**: 2025å¹´11æœˆ

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æ ¸å¿ƒæœºåˆ¶](#æ ¸å¿ƒæœºåˆ¶)
3. [æ•°æ®ç»“æ„è®¾è®¡](#æ•°æ®ç»“æ„è®¾è®¡)
4. [å¸ˆå¾’å…³ç³»ç±»å‹](#å¸ˆå¾’å…³ç³»ç±»å‹)
5. [ä¼ æ‰¿å†…å®¹ç³»ç»Ÿ](#ä¼ æ‰¿å†…å®¹ç³»ç»Ÿ)
6. [å¸ˆå¾’äº’åŠ¨ç³»ç»Ÿ](#å¸ˆå¾’äº’åŠ¨ç³»ç»Ÿ)
7. [å®—é—¨å¸ˆå¾’ä½“ç³»](#å®—é—¨å¸ˆå¾’ä½“ç³»)
8. [AIè¡Œä¸ºè®¾è®¡](#aiè¡Œä¸ºè®¾è®¡)
9. [UIç•Œé¢è®¾è®¡](#uiç•Œé¢è®¾è®¡)
10. [æŠ€æœ¯å®ç°](#æŠ€æœ¯å®ç°)
11. [å¼€å‘TODO](#å¼€å‘todo)

---

## ç³»ç»Ÿæ¦‚è¿°

### è®¾è®¡ç›®æ ‡

å¸ˆå¾’ä¼ æ‰¿ç³»ç»Ÿæ˜¯ä¿®ä»™ä¸–ç•Œä¸­è‡³å…³é‡è¦çš„ç¤¾ä¼šå…³ç³»ç³»ç»Ÿï¼Œä¸ºä¿®å£«æä¾›çŸ¥è¯†ä¼ æ‰¿ã€ä¿®ç‚¼æŒ‡å¯¼å’Œç¤¾äº¤äº’åŠ¨ã€‚æœ¬ç³»ç»Ÿæ—¨åœ¨ï¼š

1. **çŸ¥è¯†ä¼ æ‰¿** - å¸ˆå‚…å¯ä»¥å°†åŠŸæ³•ã€æŠ€èƒ½ã€ä¸¹æ–¹ç­‰ä¼ æˆç»™å¼Ÿå­
2. **ä¿®ç‚¼åŠ é€Ÿ** - æœ‰å¸ˆå‚…æŒ‡å¯¼çš„å¼Ÿå­ä¿®ç‚¼æ•ˆç‡æå‡
3. **ç¤¾äº¤ç½‘ç»œ** - æ„å»ºä¿®ä»™ä¸–ç•Œçš„å¸ˆé—¨å…³ç³»ç½‘ç»œ
4. **å®—é—¨å‘å±•** - å¸ˆå¾’å…³ç³»æ˜¯å®—é—¨å‘å±•å£®å¤§çš„åŸºç¡€
5. **æ•…äº‹é©±åŠ¨** - å¸ˆå¾’å…³ç³»äº§ç”Ÿä¸°å¯Œçš„æ¸¸æˆäº‹ä»¶å’Œå‰§æƒ…

### æ ¸å¿ƒç†å¿µ

- **ä¸€å¸ˆå¤šå¾’**: ä¸€ä½å¸ˆå‚…å¯ä»¥æ”¶å¤šåå¼Ÿå­ï¼Œä½†å¼Ÿå­é€šå¸¸åªæœ‰ä¸€ä½æ­£å¼å¸ˆå‚…
- **ä¼ æ‰¿æœ‰åº**: çŸ¥è¯†ä¼ æ‰¿éœ€è¦æ—¶é—´å’Œæ¡ä»¶ï¼Œä¸æ˜¯ç¬é—´å®Œæˆ
- **äº’åˆ©å…±èµ¢**: å¸ˆå¾’å…³ç³»å¯¹åŒæ–¹éƒ½æœ‰ç›Šå¤„ï¼ˆå¸ˆå‚…è·å¾—è´¡çŒ®ï¼Œå¼Ÿå­è·å¾—ä¼ æ‰¿ï¼‰
- **å…³ç³»åŠ¨æ€**: å¸ˆå¾’å…³ç³»å¯ä»¥éšæ—¶é—´å‘å±•ã€ç–è¿œç”šè‡³æ–­è£‚
- **ç»§æ‰¿å»¶ç»­**: å¸ˆå‚…æ•…å»åï¼Œå¤§å¼Ÿå­å¯ç»§æ‰¿è¡£é’µ

---

## æ ¸å¿ƒæœºåˆ¶

### 2.1 æ‹œå¸ˆæ¡ä»¶

#### å¯¹å¸ˆå‚…çš„è¦æ±‚
- **å¢ƒç•Œè¦æ±‚**: å¸ˆå‚…å¢ƒç•Œå¿…é¡»é«˜äºå¼Ÿå­è‡³å°‘ä¸€ä¸ªå¤§å¢ƒç•Œï¼ˆå¦‚ç­‘åŸºæ”¶ç»ƒæ°”å¼Ÿå­ï¼‰
- **åŠŸæ³•æŒæ¡**: å¸ˆå‚…ä¸»ä¿®åŠŸæ³•æŒæ¡ç¨‹åº¦éœ€è¾¾åˆ° 40% ä»¥ä¸Š
- **å¼Ÿå­ä¸Šé™**: æ ¹æ®å¢ƒç•Œå†³å®šå¯æ”¶å¼Ÿå­æ•°é‡
  - ç­‘åŸº: æœ€å¤š2åå¼Ÿå­
  - é‡‘ä¸¹: æœ€å¤š5åå¼Ÿå­
  - å…ƒå©´: æœ€å¤š10åå¼Ÿå­
  - åŒ–ç¥åŠä»¥ä¸Š: æ— ä¸Šé™
- **ç‰¹è´¨é™åˆ¶**: æŸäº›ç‰¹è´¨çš„ä¿®å£«ä¸èƒ½æ”¶å¾’ï¼ˆå¦‚ç‹¬è¡Œä¾ ã€é­”é“ä¿®å£«ç­‰ï¼‰

#### å¯¹å¼Ÿå­çš„è¦æ±‚
- **å¢ƒç•Œé™åˆ¶**: å¼Ÿå­å¢ƒç•Œä¸èƒ½é«˜äºå¸ˆå‚…
- **æ— å¸ˆçŠ¶æ€**: å¼Ÿå­å½“å‰æ²¡æœ‰æ­£å¼å¸ˆå‚…ï¼ˆä½†å¯ä»¥æœ‰è®°åå¼Ÿå­èº«ä»½ï¼‰
- **çµæ ¹åŒ¹é…**: å¼Ÿå­çµæ ¹ä¸å¸ˆå‚…åŠŸæ³•æœ‰ä¸€å®šå¥‘åˆåº¦
- **å…³ç³»è¦æ±‚**: å¸ˆå¾’åŒæ–¹å…³ç³»ä¸èƒ½ä¸ºæ•Œå¯¹

#### æ‹œå¸ˆæˆåŠŸç‡
```
æˆåŠŸç‡ = åŸºç¡€æˆåŠŸç‡ Ã— çµæ ¹å¥‘åˆåº¦ Ã— å…³ç³»ç³»æ•° Ã— æ™ºåŠ›ç³»æ•°
åŸºç¡€æˆåŠŸç‡ = 0.7
çµæ ¹å¥‘åˆåº¦ = å¼Ÿå­çµæ ¹ä¸å¸ˆå‚…åŠŸæ³•çš„å¥‘åˆåº¦ (0-1)
å…³ç³»ç³»æ•° = 1 + åŒæ–¹å…³ç³»å€¼ / 100 (0.5-1.5)
æ™ºåŠ›ç³»æ•° = å¼Ÿå­æ™ºåŠ› / 50 (0.5-2.0)
```

### 2.2 å¸ˆå¾’å…³ç³»ç­‰çº§

| å…³ç³»ç­‰çº§ | äº²å¯†åº¦èŒƒå›´ | æè¿° | ä¼ æ‰¿æ•ˆç‡ |
|---------|-----------|------|---------|
| è®°åå¼Ÿå­ | 0-30 | åˆå…¥å¸ˆé—¨ï¼Œèº«ä»½æœªå®š | 50% |
| å…¥å®¤å¼Ÿå­ | 30-60 | æ­£å¼æ‹œå¸ˆï¼Œå¯å­¦æ ¸å¿ƒ | 80% |
| äº²ä¼ å¼Ÿå­ | 60-90 | æ·±å—å™¨é‡ï¼Œé‡ç‚¹åŸ¹å…» | 100% |
| è¡£é’µä¼ äºº | 90-100 | ç»§æ‰¿è¡£é’µï¼Œä¼ æ‰¿æ­£ç»Ÿ | 120% |

**äº²å¯†åº¦å¢é•¿å› ç´ **:
- æ—¥å¸¸è·Ÿéšå¸ˆå‚…ä¿®ç‚¼ (+0.1/å¤©)
- å®Œæˆå¸ˆå‚…å¸ƒç½®çš„ä»»åŠ¡ (+1-5/æ¬¡)
- ä¸ºå®—é—¨/å¸ˆé—¨åšå‡ºè´¡çŒ® (+1-10/æ¬¡)
- å¸ˆå‚…ä¸»åŠ¨ä¼ æˆçŸ¥è¯† (+2/æ¬¡)
- å…±åŒæˆ˜æ–—å¹¶è·èƒœ (+3/æ¬¡)

**äº²å¯†åº¦é™ä½å› ç´ **:
- é•¿æ—¶é—´ä¸è”ç³» (-0.05/å¤©)
- è¿èƒŒå¸ˆå‚…æ„æ„¿ (-5/æ¬¡)
- èƒŒå›å¸ˆé—¨ (-50)
- è½¬æŠ•ä»–é—¨ (-100ï¼Œå…³ç³»æ–­è£‚)

### 2.3 å¸ˆå¾’å…³ç³»è§£é™¤

#### æ­£å¸¸è§£é™¤
- **å‡ºå¸ˆ**: å¼Ÿå­å¢ƒç•Œè¾¾åˆ°å¸ˆå‚…å¢ƒç•Œæˆ–åŠŸæ³•æŒæ¡è¾¾åˆ°100%ï¼Œå¯ç”³è¯·å‡ºå¸ˆ
- **é€å‡ºå¸ˆé—¨**: å¸ˆå‚…ä¸»åŠ¨è§£é™¤å…³ç³»ï¼Œå¼Ÿå­ä¿ç•™æ‰€å­¦ä½†å¤±å»å¸ˆé—¨èº«ä»½
- **å¸ˆå‚…ä»™é€**: å¸ˆå‚…æ­»äº¡åï¼Œå¼Ÿå­è‡ªåŠ¨æˆä¸ºç‹¬ç«‹ä¿®å£«

#### å¼‚å¸¸è§£é™¤
- **èƒŒå›å¸ˆé—¨**: å¼Ÿå­ä¸»åŠ¨èƒŒå›ï¼Œæ°¸ä¹…æˆä¸ºå¸ˆé—¨æ•Œäºº
- **è½¬ä¿®å¼‚é“**: å¼Ÿå­ä¿®ç‚¼ä¸å¸ˆé—¨å†²çªçš„åŠŸæ³•ï¼Œè¢«åŠ¨è§£é™¤
- **å¸ˆå‚…å •é­”**: å¸ˆå‚…å •å…¥é­”é“ï¼Œå¼Ÿå­å¯é€‰æ‹©è·Ÿéšæˆ–ç¦»å¼€

---

## æ•°æ®ç»“æ„è®¾è®¡

### 3.1 MasterApprenticeRelation (å¸ˆå¾’å…³ç³»ç»„ä»¶)

```csharp
/// <summary>
/// å¸ˆå¾’å…³ç³»ç»„ä»¶ - å­˜å‚¨åœ¨å¼Ÿå­Entityä¸Šï¼ŒæŒ‡å‘å¸ˆå‚…
/// </summary>
public struct MasterApprenticeRelation : ILinkRelation
{
    // å…³ç³»ç›®æ ‡ï¼ˆå¸ˆå‚…Entityï¼‰
    public Entity Master;
    
    // å…³ç³»ç±»å‹
    public MasterApprenticeType RelationType;
    
    // äº²å¯†åº¦ (0-100)
    public float Intimacy;
    
    // æ‹œå¸ˆæ—¶é—´ï¼ˆä¸–ç•Œæ—¶é—´æˆ³ï¼‰
    public float ApprenticeTime;
    
    // å·²ä¼ æ‰¿çš„åŠŸæ³•æ•°é‡
    public int TransferredCultibookCount;
    
    // å·²ä¼ æ‰¿çš„æŠ€èƒ½æ•°é‡
    public int TransferredSkillCount;
    
    // æ˜¯å¦ä¸ºè¡£é’µä¼ äºº
    public bool IsSuccessor;
    
    public Entity GetRelationKey() => Master;
}

/// <summary>
/// å¸ˆå¾’å…³ç³»ç±»å‹æšä¸¾
/// </summary>
public enum MasterApprenticeType
{
    Nominal,      // è®°åå¼Ÿå­
    Formal,       // å…¥å®¤å¼Ÿå­
    Direct,       // äº²ä¼ å¼Ÿå­
    Successor     // è¡£é’µä¼ äºº
}
```

### 3.2 MasterApprenticeState (å¸ˆå‚…çŠ¶æ€ç»„ä»¶)

```csharp
/// <summary>
/// å¸ˆå‚…çŠ¶æ€ç»„ä»¶ - å­˜å‚¨åœ¨å¸ˆå‚…Entityä¸Š
/// </summary>
public struct MasterApprenticeState : IComponent
{
    // å½“å‰å¼Ÿå­æ•°é‡
    public int ApprenticeCount;
    
    // æœ€å¤§å¼Ÿå­æ•°é‡
    public int MaxApprenticeCount;
    
    // è¡£é’µä¼ äººIDï¼ˆå¦‚æœå·²æŒ‡å®šï¼‰
    public long SuccessorActorId;
    
    // æ”¶å¾’æ„æ„¿ (0-100ï¼Œå½±å“AIä¸»åŠ¨æ”¶å¾’æ¦‚ç‡)
    public float RecruitWillingness;
    
    // ä¼ æˆæ„æ„¿ (0-100ï¼Œå½±å“AIä¸»åŠ¨ä¼ æˆæ¦‚ç‡)
    public float TeachWillingness;
    
    // å¸ˆé—¨é£æ ¼
    public MasterStyle Style;
}

/// <summary>
/// å¸ˆé—¨é£æ ¼æšä¸¾ - å½±å“AIè¡Œä¸º
/// </summary>
public enum MasterStyle
{
    Strict,      // ä¸¥å‰å‹ - é«˜è¦æ±‚ï¼Œé«˜æˆé•¿
    Gentle,      // æ¸©å’Œå‹ - äº²å¯†åº¦å¢é•¿å¿«
    Laissez,     // æ”¾ä»»å‹ - è‡ªç”±å‘å±•
    Demanding,   // è‹›æ±‚å‹ - è¦æ±‚å¼Ÿå­è´¡çŒ®
    Protective   // ä¿æŠ¤å‹ - ä¸ºå¼Ÿå­å‡ºå¤´
}
```

### 3.3 ApprenticeData (å¼Ÿå­æ•°æ®)

```csharp
/// <summary>
/// å¼Ÿå­æ•°æ® - ç”¨äºè®°å½•å¼Ÿå­çš„è¯¦ç»†ä¿¡æ¯
/// </summary>
public class ApprenticeData
{
    // å¼Ÿå­ActorID
    public long ActorId;
    
    // æ‹œå¸ˆæ—¶é—´
    public float ApprenticeTime;
    
    // å…³ç³»ç±»å‹
    public MasterApprenticeType RelationType;
    
    // äº²å¯†åº¦
    public float Intimacy;
    
    // ä¼ æ‰¿è®°å½•
    public List<TransferRecord> TransferHistory;
}

/// <summary>
/// ä¼ æ‰¿è®°å½•
/// </summary>
public struct TransferRecord
{
    public string ContentType;    // å†…å®¹ç±»å‹: Cultibook/Skill/Elixir
    public string ContentId;      // å†…å®¹ID
    public float TransferTime;    // ä¼ æ‰¿æ—¶é—´
    public float Quality;         // ä¼ æ‰¿è´¨é‡ (0-100)
}
```

### 3.4 SectData æ‰©å±•

```csharp
/// <summary>
/// å®—é—¨æ•°æ®æ‰©å±•
/// </summary>
public class SectData : MetaObjectData
{
    // åŸæœ‰å­—æ®µ
    public string FounderActorName;
    public long FounderActorID;
    public int BannerBackgroundIndex;
    public int BannerIconIndex;
    
    // ======== æ–°å¢å­—æ®µ ========
    
    // å½“å‰æŒé—¨ID
    public long CurrentLeaderID;
    
    // é•¿è€åˆ—è¡¨ï¼ˆActorIDåˆ—è¡¨ï¼‰
    public List<long> ElderIDs;
    
    // å®—é—¨åŠŸæ³•IDåˆ—è¡¨
    public List<string> SectCultibookIds;
    
    // å®—é—¨æŠ€èƒ½IDåˆ—è¡¨
    public List<string> SectSkillIds;
    
    // å®—é—¨ä¸¹æ–¹IDåˆ—è¡¨
    public List<string> SectElixirIds;
    
    // å¸ˆå¾’å…³ç³»å›¾ï¼ˆå¸ˆå‚…ID -> å¼Ÿå­IDåˆ—è¡¨ï¼‰
    public Dictionary<long, List<long>> MasterApprenticeMap;
    
    // å®—é—¨è´¡çŒ®ç‚¹è®°å½•
    public Dictionary<long, int> ContributionPoints;
    
    // å®—é—¨è§„æ¨¡
    public SectScale Scale;
}

/// <summary>
/// å®—é—¨è§„æ¨¡æšä¸¾
/// </summary>
public enum SectScale
{
    Tiny,       // å¾®å‹ï¼ˆ1-10äººï¼‰
    Small,      // å°å‹ï¼ˆ11-50äººï¼‰
    Medium,     // ä¸­å‹ï¼ˆ51-200äººï¼‰
    Large,      // å¤§å‹ï¼ˆ201-1000äººï¼‰
    Huge,       // å·¨å‹ï¼ˆ1000+äººï¼‰
}
```

---

## å¸ˆå¾’å…³ç³»ç±»å‹

### 4.1 ä¸ªäººå¸ˆå¾’å…³ç³»

æœ€åŸºæœ¬çš„å¸ˆå¾’å…³ç³»ï¼Œå¸ˆå‚…ä¸ªäººæ”¶å¼Ÿå­ã€‚

**ç‰¹ç‚¹**:
- ä¸éœ€è¦å®—é—¨èƒŒæ™¯
- å¸ˆå‚…å…¨æƒè´Ÿè´£å¼Ÿå­åŸ¹å…»
- ä¼ æ‰¿å†…å®¹ç”±å¸ˆå‚…è‡ªä¸»å†³å®š
- å…³ç³»æ›´åŠ ç´§å¯†å’Œä¸ªäººåŒ–

**é€‚ç”¨åœºæ™¯**:
- æ•£ä¿®æ”¶å¾’
- å®—é—¨å¤–çš„ä¸ªäººä¼ æ‰¿
- éšä¸–é«˜äººæ”¶å¾’

### 4.2 å®—é—¨å¸ˆå¾’å…³ç³»

åœ¨å®—é—¨ä½“ç³»å†…å»ºç«‹çš„å¸ˆå¾’å…³ç³»ã€‚

**ç‰¹ç‚¹**:
- éœ€è¦å®—é—¨è®¤å¯
- ä¼ æ‰¿åŒ…å«å®—é—¨åŠŸæ³•å’ŒæŠ€èƒ½
- å¼Ÿå­åŒæ—¶è·å¾—å®—é—¨èº«ä»½
- å—å®—é—¨è§„çŸ©çº¦æŸ

**å±‚çº§ç»“æ„**:
```
å®—é—¨
â”œâ”€â”€ æŒé—¨ï¼ˆå®—ä¸»ï¼‰
â”‚   â”œâ”€â”€ äº²ä¼ å¼Ÿå­
â”‚   â””â”€â”€ å…¥å®¤å¼Ÿå­
â”œâ”€â”€ é•¿è€
â”‚   â”œâ”€â”€ äº²ä¼ å¼Ÿå­
â”‚   â””â”€â”€ å…¥å®¤å¼Ÿå­
â”œâ”€â”€ å†…é—¨å¼Ÿå­ï¼ˆæœ‰å¸ˆå‚…ï¼‰
â”‚   â””â”€â”€ ç”±é•¿è€æˆ–äº²ä¼ å¼Ÿå­æŒ‡å¯¼
â”œâ”€â”€ å¤–é—¨å¼Ÿå­ï¼ˆæ— æ­£å¼å¸ˆå‚…ï¼‰
â”‚   â””â”€â”€ ç”±å®—é—¨ç»Ÿä¸€åŸ¹å…»
â””â”€â”€ è®°åå¼Ÿå­
    â””â”€â”€ æŒ‚åï¼Œèµ„æºæœ‰é™
```

### 4.3 éš”ä»£å¸ˆå¾’å…³ç³»

å¸ˆç¥–ä¸å¾’å­™ä¹‹é—´çš„ç‰¹æ®Šå…³ç³»ã€‚

**è§¦å‘æ¡ä»¶**:
- å¸ˆå‚…çš„å¸ˆå‚…ä»åœ¨ä¸–
- å¾’å­™è¡¨ç°å‡ºè‰²æˆ–å¤©èµ‹å¼‚ç¦€
- å¸ˆç¥–ä¸»åŠ¨å…³æ³¨æˆ–æŒ‡ç‚¹

**æ•ˆæœ**:
- å¯ä»å¸ˆç¥–å¤„è·å¾—é¢å¤–ä¼ æ‰¿
- æå‡åœ¨å¸ˆé—¨ä¸­çš„åœ°ä½
- å¯èƒ½è¢«æŒ‡å®šä¸ºéš”ä»£ä¼ äºº

---

## ä¼ æ‰¿å†…å®¹ç³»ç»Ÿ

### 5.1 åŠŸæ³•ä¼ æ‰¿

**ä¼ æ‰¿æµç¨‹**:
1. å¸ˆå‚…é€‰æ‹©è¦ä¼ æˆçš„åŠŸæ³•
2. æ£€æŸ¥å¼Ÿå­æ˜¯å¦æ»¡è¶³åŠŸæ³•è¦æ±‚ï¼ˆçµæ ¹ã€å¢ƒç•Œï¼‰
3. å¼€å§‹ä¼ æ‰¿è¿‡ç¨‹ï¼ˆéœ€è¦æ—¶é—´ï¼‰
4. æ ¹æ®ä¼ æ‰¿æ•ˆç‡ç¡®å®šå¼Ÿå­è·å¾—çš„æŒæ¡ç¨‹åº¦

**ä¼ æ‰¿æ•ˆç‡è®¡ç®—**:
```
ä¼ æ‰¿æ•ˆç‡ = åŸºç¡€æ•ˆç‡ Ã— å…³ç³»ç³»æ•° Ã— å¸ˆå‚…æŒæ¡åº¦ Ã— æ™ºåŠ›ç³»æ•°
åŸºç¡€æ•ˆç‡ = 30%
å…³ç³»ç³»æ•° = å¸ˆå¾’å…³ç³»ç­‰çº§å¯¹åº”çš„ä¼ æ‰¿æ•ˆç‡ (50%-120%)
å¸ˆå‚…æŒæ¡åº¦ = å¸ˆå‚…å¯¹è¯¥åŠŸæ³•çš„æŒæ¡ç¨‹åº¦ / 100
æ™ºåŠ›ç³»æ•° = (å¸ˆå‚…æ™ºåŠ› + å¼Ÿå­æ™ºåŠ›) / 100

å¼Ÿå­è·å¾—æŒæ¡åº¦ = min(å¸ˆå‚…æŒæ¡åº¦ Ã— ä¼ æ‰¿æ•ˆç‡, 80%)
```

**é™åˆ¶**:
- å¼Ÿå­é€šè¿‡ä¼ æ‰¿è·å¾—çš„åŠŸæ³•æŒæ¡åº¦ä¸èƒ½è¶…è¿‡å¸ˆå‚…
- ä¼ æ‰¿åå¼Ÿå­ä»éœ€è‡ªå·±ä¿®ç‚¼æ‰èƒ½ç»§ç»­æå‡
- æŸäº›åŠŸæ³•æ ‡è®°ä¸º"ä¸å¯ä¼ æˆ"

### 5.2 æŠ€èƒ½ä¼ æ‰¿

**ä¼ æ‰¿æ–¹å¼**:
1. **å£æˆå¿ƒä¼ **: å¸ˆå‚…ç›´æ¥ä¼ æˆæŠ€èƒ½å¿ƒæ³•
2. **æŠ€èƒ½ä¹¦ä¼ æ‰¿**: å¸ˆå‚…ç¼–å†™æŠ€èƒ½ä¹¦ç»™å¼Ÿå­
3. **å®æˆ˜æ•™å­¦**: åœ¨æˆ˜æ–—ä¸­æ¼”ç¤ºå’ŒæŒ‡å¯¼

**ä¼ æ‰¿æ•ˆæœ**:
- ç›´æ¥ä¼ æˆ: å¼Ÿå­ç›´æ¥å­¦ä¼šæŠ€èƒ½ï¼Œä½†é¢†æ‚Ÿåº¦è¾ƒä½
- æŠ€èƒ½ä¹¦: å¼Ÿå­éœ€è¦è‡ªå·±ç ”è¯»ï¼Œä½†å¯ä»¥åå¤å­¦ä¹ 
- å®æˆ˜æ•™å­¦: é¢†æ‚Ÿåº¦æœ€é«˜ï¼Œä½†éœ€è¦å¸ˆå¾’åŒæ—¶åœ¨åœº

### 5.3 ä¸¹æ–¹ä¼ æ‰¿

**ä¼ æ‰¿æ¡ä»¶**:
- å¸ˆå‚…æŒæ¡è¯¥ä¸¹æ–¹
- å¼Ÿå­å¢ƒç•Œè¾¾åˆ°ç‚¼ä¸¹è¦æ±‚ï¼ˆé€šå¸¸ä¸ºé‡‘ä¸¹æœŸï¼‰

**ä¼ æ‰¿æ•ˆæœ**:
- å¼Ÿå­è·å¾—ä¸¹æ–¹çŸ¥è¯†
- åˆå§‹æŒæ¡åº¦å–å†³äºä¼ æ‰¿è´¨é‡
- éœ€è¦å®é™…ç‚¼åˆ¶æ‰èƒ½æå‡æŒæ¡åº¦

### 5.4 ä¿®ç‚¼ç»éªŒä¼ æ‰¿

**ä¼ æ‰¿å†…å®¹**:
- ä¿®ç‚¼å¿ƒå¾—
- çªç ´ç»éªŒ
- é¿åŠ«æŠ€å·§
- æˆ˜æ–—æŠ€å·§

**æ•ˆæœ**:
- æå‡å¼Ÿå­ä¿®ç‚¼é€Ÿåº¦
- é™ä½çªç ´å¤±è´¥ç‡
- æé«˜æ¸¡åŠ«æˆåŠŸç‡
- å¢åŠ æˆ˜æ–—èƒ½åŠ›

---

## å¸ˆå¾’äº’åŠ¨ç³»ç»Ÿ

### 6.1 æ—¥å¸¸äº’åŠ¨

#### è·Ÿéšä¿®ç‚¼
- å¼Ÿå­è·Ÿéšå¸ˆå‚…ä¿®ç‚¼ï¼Œæ•ˆç‡æå‡30%
- å¢åŠ äº²å¯†åº¦
- æœ‰æœºä¼šé¢†æ‚Ÿå¸ˆå‚…çš„æˆ˜æ–—æŠ€å·§

#### è¯·æ•™é—®é¢˜
- å¼Ÿå­ä¸»åŠ¨è¯·æ•™ï¼Œå¢åŠ åŠŸæ³•æŒæ¡åº¦
- æ¶ˆè€—å¸ˆå‚…çš„æ—¶é—´ï¼ˆå½±å“å¸ˆå‚…ä¿®ç‚¼ï¼‰
- å¢åŠ äº²å¯†åº¦

#### å¸ƒç½®ä»»åŠ¡
- å¸ˆå‚…å¸ƒç½®ä¿®ç‚¼ä»»åŠ¡ç»™å¼Ÿå­
- å®Œæˆä»»åŠ¡è·å¾—å¥–åŠ±å’Œäº²å¯†åº¦
- å¤±è´¥å¯èƒ½é™ä½äº²å¯†åº¦

### 6.2 é‡è¦äº‹ä»¶

#### ä¼ æˆä»ªå¼
- æ­£å¼ä¼ æˆåŠŸæ³•/æŠ€èƒ½æ—¶çš„ä»ªå¼
- å¢åŠ ä¼ æ‰¿æ•ˆç‡
- äº§ç”Ÿä¸–ç•Œæ—¥å¿—

#### å…¥å®¤ç¤¼
- å¼Ÿå­æ­£å¼æˆä¸ºå…¥å®¤å¼Ÿå­
- è§£é”æ ¸å¿ƒä¼ æ‰¿
- å¢åŠ å®—é—¨è´¡çŒ®

#### å‡ºå¸ˆç¤¼
- å¼Ÿå­ä¿®ä¸ºæœ‰æˆï¼Œç¦»å¼€å¸ˆé—¨
- å…³ç³»è½¬å˜ä¸º"åŒé—¨"
- ä¿ç•™å¸ˆå¾’æƒ…è°Š

#### è¡£é’µä¼ æ‰¿
- å¸ˆå‚…é€‰å®šè¡£é’µä¼ äºº
- ä¼ äººè·å¾—å¸ˆå‚…æœ€æ ¸å¿ƒçš„ä¼ æ‰¿
- ç»§æ‰¿å¸ˆå‚…çš„ç¤¾ä¼šå…³ç³»

### 6.3 ç‰¹æ®Šäº’åŠ¨

#### ä¸ºå¾’å‡ºå¤´
- å¼Ÿå­è¢«æ¬ºè´Ÿæ—¶ï¼Œå¸ˆå‚…å‡ºé¢ä¿æŠ¤
- å¢åŠ å¼Ÿå­å¯¹å¸ˆå‚…çš„å¿ è¯š
- å¯èƒ½å¼•å‘é—¨æ´¾å†²çª

#### ä¼ æ‰¿é—å¿—
- å¸ˆå‚…ä¸´ç»ˆå‰çš„æœ€åä¼ æ‰¿
- æ•ˆç‡å¤§å¹…æå‡
- å¯èƒ½åŒ…å«ç§˜ä¼ å†…å®¹

#### åŒé—¨è¾ƒè‰º
- åŒé—¨å¼Ÿå­ä¹‹é—´çš„åˆ‡ç£‹
- æå‡æˆ˜æ–—æŠ€å·§
- å»ºç«‹åŒé—¨å…³ç³»

---

## å®—é—¨å¸ˆå¾’ä½“ç³»

### 7.1 å®—é—¨èŒä½

| èŒä½ | è¦æ±‚ | æƒé™ | å¼Ÿå­ä¸Šé™ |
|-----|------|------|---------|
| å®—ä¸» | å…ƒå©´æœŸ+ | å…¨éƒ¨æƒé™ | 20 |
| é•¿è€ | å…ƒå©´æœŸ | æ”¶å¾’ã€ä¼ æˆå®—é—¨åŠŸæ³• | 10 |
| å†…é—¨æ‰§äº‹ | é‡‘ä¸¹æœŸ | æŒ‡å¯¼å¤–é—¨å¼Ÿå­ | 5 |
| å†…é—¨å¼Ÿå­ | ç­‘åŸºæœŸ | å­¦ä¹ å®—é—¨æ ¸å¿ƒ | - |
| å¤–é—¨å¼Ÿå­ | ç»ƒæ°”æœŸ | å­¦ä¹ åŸºç¡€åŠŸæ³• | - |
| æ‚å½¹å¼Ÿå­ | æ— è¦æ±‚ | æ— ä¿®ç‚¼èµ„æº | - |

### 7.2 å®—é—¨åŠŸæ³•ä¼ æ‰¿

**ä¼ æ‰¿è§„åˆ™**:
- å®—é—¨åŠŸæ³•ç”±å®—é—¨ç»Ÿä¸€ç®¡ç†
- ä¸åŒèŒä½å¯å­¦ä¹ ä¸åŒç­‰çº§çš„åŠŸæ³•
- ä¼ æ‰¿éœ€è¦è´¡çŒ®ç‚¹
- ç¦æ­¢å¤–ä¼ ï¼ˆå¦åˆ™è§†ä¸ºå›é—¨ï¼‰

**ä¼ æ‰¿å±‚çº§**:
```
å…¥é—¨åŠŸæ³•ï¼ˆæ‰€æœ‰å¼Ÿå­å¯å­¦ï¼‰
â”œâ”€â”€ åŸºç¡€æŠ¤ä½“æœ¯
â”œâ”€â”€ åŸºç¡€å…»æ°”æœ¯
â””â”€â”€ åŸºç¡€å‰‘æœ¯

æ ¸å¿ƒåŠŸæ³•ï¼ˆå†…é—¨å¯å­¦ï¼‰
â”œâ”€â”€ å®—é—¨ä¸»ä¿®åŠŸæ³•
â”œâ”€â”€ å®—é—¨ç§˜æœ¯
â””â”€â”€ å®—é—¨ç‚¼ä¸¹æœ¯

é•‡æ´¾åŠŸæ³•ï¼ˆäº²ä¼ å¯å­¦ï¼‰
â”œâ”€â”€ é•‡æ´¾ç»å­¦
â”œâ”€â”€ ç¥–ä¼ å¿ƒæ³•
â””â”€â”€ å¤±ä¼ ç§˜æ³•
```

### 7.3 å®—é—¨è´¡çŒ®ç³»ç»Ÿ

**è·å–æ–¹å¼**:
- å®Œæˆå®—é—¨ä»»åŠ¡
- ä¸ºå®—é—¨æˆ˜æ–—
- ä¸Šäº¤èµ„æº
- æ‹›å‹Ÿæ–°å¼Ÿå­
- åˆ›é€ æ–°åŠŸæ³•/ä¸¹æ–¹

**ä½¿ç”¨æ–¹å¼**:
- å…‘æ¢åŠŸæ³•ä¼ æ‰¿
- å…‘æ¢ä¸¹è¯
- å…‘æ¢æ³•å®
- æå‡å®—é—¨åœ°ä½
- ç”³è¯·é—­å…³èµ„æº

---

## AIè¡Œä¸ºè®¾è®¡

### 8.1 å¸ˆå‚…è¡Œä¸º

#### BehRecruitApprentice (æ”¶å¾’)
```csharp
/// <summary>
/// AIè¡Œä¸ºï¼šå¯»æ‰¾å¹¶æ”¶å–å¼Ÿå­
/// </summary>
public class BehRecruitApprentice : BehaviourActionActor
{
    public override BehResult execute(Actor pObject)
    {
        var ae = pObject.GetExtend();
        
        // æ£€æŸ¥æ˜¯å¦å¯ä»¥æ”¶å¾’
        if (!CanRecruit(ae)) return BehResult.Stop;
        
        // å¯»æ‰¾åˆé€‚çš„å¼Ÿå­å€™é€‰
        var candidate = FindApprenticeCandidate(pObject);
        if (candidate == null) return BehResult.Stop;
        
        // å°è¯•æ”¶å¾’
        if (TryRecruit(ae, candidate.GetExtend()))
        {
            return BehResult.Continue;
        }
        
        return BehResult.Stop;
    }
}
```

#### BehTeachApprentice (ä¼ æˆ)
```csharp
/// <summary>
/// AIè¡Œä¸ºï¼šå‘å¼Ÿå­ä¼ æˆçŸ¥è¯†
/// </summary>
public class BehTeachApprentice : BehaviourActionActor
{
    public override BehResult execute(Actor pObject)
    {
        var ae = pObject.GetExtend();
        
        // è·å–éœ€è¦ä¼ æˆçš„å¼Ÿå­
        var apprentice = GetApprenticeNeedTeaching(ae);
        if (apprentice == null) return BehResult.Stop;
        
        // é€‰æ‹©ä¼ æˆå†…å®¹
        var content = SelectTeachContent(ae, apprentice);
        if (content == null) return BehResult.Stop;
        
        // æ‰§è¡Œä¼ æˆ
        ExecuteTeaching(ae, apprentice, content);
        
        return BehResult.Continue;
    }
}
```

#### BehProtectApprentice (ä¿æŠ¤å¼Ÿå­)
```csharp
/// <summary>
/// AIè¡Œä¸ºï¼šä¿æŠ¤å¼Ÿå­
/// </summary>
public class BehProtectApprentice : BehaviourActionActor
{
    public override BehResult execute(Actor pObject)
    {
        var ae = pObject.GetExtend();
        
        // æ£€æŸ¥æ˜¯å¦æœ‰å¼Ÿå­å¤„äºå±é™©ä¸­
        var endangeredApprentice = GetEndangeredApprentice(ae);
        if (endangeredApprentice == null) return BehResult.Stop;
        
        // å‰å¾€ä¿æŠ¤
        var threat = endangeredApprentice.GetExtend().GetCurrentThreat();
        if (threat != null)
        {
            pObject.setAttackTarget(threat);
            return BehResult.Continue;
        }
        
        return BehResult.Stop;
    }
}
```

### 8.2 å¼Ÿå­è¡Œä¸º

#### BehSeekMaster (å¯»å¸ˆ)
```csharp
/// <summary>
/// AIè¡Œä¸ºï¼šå¯»æ‰¾å¸ˆå‚…
/// </summary>
public class BehSeekMaster : BehaviourActionActor
{
    public override BehResult execute(Actor pObject)
    {
        var ae = pObject.GetExtend();
        
        // æ£€æŸ¥æ˜¯å¦éœ€è¦å¸ˆå‚…
        if (ae.HasMaster()) return BehResult.Stop;
        
        // å¯»æ‰¾åˆé€‚çš„å¸ˆå‚…
        var potentialMaster = FindPotentialMaster(pObject);
        if (potentialMaster == null) return BehResult.Stop;
        
        // å‰å¾€æ‹œå¸ˆ
        if (!pObject.isInAttackRange(potentialMaster))
        {
            pObject.goTo(potentialMaster);
            return BehResult.RepeatStep;
        }
        
        // å°è¯•æ‹œå¸ˆ
        TryBeApprentice(ae, potentialMaster.GetExtend());
        
        return BehResult.Continue;
    }
}
```

#### BehFollowMaster (è·Ÿéšå¸ˆå‚…)
```csharp
/// <summary>
/// AIè¡Œä¸ºï¼šè·Ÿéšå¸ˆå‚…ä¿®ç‚¼
/// </summary>
public class BehFollowMaster : BehaviourActionActor
{
    public override BehResult execute(Actor pObject)
    {
        var ae = pObject.GetExtend();
        var master = ae.GetMaster();
        
        if (master == null || !master.Base.data.alive) 
            return BehResult.Stop;
        
        // è·Ÿéšå¸ˆå‚…
        if (pObject.getDistanceTo(master.Base) > 3)
        {
            pObject.goTo(master.Base.current_tile);
            return BehResult.RepeatStep;
        }
        
        // è·Ÿéšä¿®ç‚¼ï¼ˆæ•ˆç‡æå‡ï¼‰
        FollowCultivate(ae, master);
        
        return BehResult.Continue;
    }
}
```

#### BehCompleteTask (å®Œæˆå¸ˆå‚…ä»»åŠ¡)
```csharp
/// <summary>
/// AIè¡Œä¸ºï¼šå®Œæˆå¸ˆå‚…å¸ƒç½®çš„ä»»åŠ¡
/// </summary>
public class BehCompleteTask : BehaviourActionActor
{
    public override BehResult execute(Actor pObject)
    {
        var ae = pObject.GetExtend();
        
        // è·å–å½“å‰ä»»åŠ¡
        var task = ae.GetCurrentMasterTask();
        if (task == null) return BehResult.Stop;
        
        // æ‰§è¡Œä»»åŠ¡
        var result = ExecuteTask(ae, task);
        
        if (result == TaskResult.Completed)
        {
            OnTaskCompleted(ae, task);
            return BehResult.Continue;
        }
        else if (result == TaskResult.InProgress)
        {
            return BehResult.RepeatStep;
        }
        
        return BehResult.Stop;
    }
}
```

### 8.3 ä»»åŠ¡ä¸æ¡ä»¶

```csharp
// å¸ˆå‚…ç›¸å…³ä»»åŠ¡
public static class MasterApprenticeTasks
{
    public static BehaviourTaskActor RecruitApprentice;   // æ”¶å¾’
    public static BehaviourTaskActor TeachApprentice;     // ä¼ æˆ
    public static BehaviourTaskActor AssignTask;          // å¸ƒç½®ä»»åŠ¡
    public static BehaviourTaskActor ProtectApprentice;   // ä¿æŠ¤å¼Ÿå­
    public static BehaviourTaskActor DesignateSuccessor;  // æŒ‡å®šä¼ äºº
}

// å¼Ÿå­ç›¸å…³ä»»åŠ¡
public static class ApprenticeTasks
{
    public static BehaviourTaskActor SeekMaster;          // å¯»å¸ˆ
    public static BehaviourTaskActor FollowMaster;        // è·Ÿéšå¸ˆå‚…
    public static BehaviourTaskActor RequestTeaching;     // è¯·æ•™
    public static BehaviourTaskActor CompleteTask;        // å®Œæˆä»»åŠ¡
    public static BehaviourTaskActor ServeTask;           // æœåŠ¡å¸ˆé—¨
}

// æ¡ä»¶ç±»
public class CondHasApprentice : BehConditionActor { }      // æœ‰å¼Ÿå­
public class CondCanRecruit : BehConditionActor { }         // å¯ä»¥æ”¶å¾’
public class CondHasMaster : BehConditionActor { }          // æœ‰å¸ˆå‚…
public class CondNeedMaster : BehConditionActor { }         // éœ€è¦å¸ˆå‚…
public class CondHasTask : BehConditionActor { }            // æœ‰ä»»åŠ¡
public class CondApprenticeInDanger : BehConditionActor { } // å¼Ÿå­æœ‰å±é™©
```

### 8.4 ActorJob è®¾è®¡

```csharp
public class ActorJobs : ExtendLibrary<ActorJob, ActorJobs>
{
    // ç°æœ‰ä»»åŠ¡...
    
    // ======== æ–°å¢ä»»åŠ¡ ========
    
    // å¸ˆå‚…å·¥ä½œ
    public static ActorJob MasterDuty { get; private set; }
    
    // å¼Ÿå­å·¥ä½œ
    public static ActorJob ApprenticeDuty { get; private set; }
    
    protected override void OnInit()
    {
        // ç°æœ‰åˆå§‹åŒ–...
        
        // å¸ˆå‚…å·¥ä½œ
        MasterDuty.addTask(ActorTasks.TeachApprentice.id);
        MasterDuty.addCondition(new CondHasApprentice());
        MasterDuty.addCondition(new CondApprenticeNeedTeaching());
        MasterDuty.addTask(ActorTasks.RecruitApprentice.id);
        MasterDuty.addCondition(new CondCanRecruit());
        MasterDuty.addCondition(new CondWillingToRecruit());
        MasterDuty.addTask(ActorTasks.ProtectApprentice.id);
        MasterDuty.addCondition(new CondApprenticeInDanger());
        MasterDuty.addTask(ActorTasks.EndJob.id);
        
        // å¼Ÿå­å·¥ä½œ
        ApprenticeDuty.addTask(ActorTasks.CompleteTask.id);
        ApprenticeDuty.addCondition(new CondHasTask());
        ApprenticeDuty.addTask(ActorTasks.FollowMaster.id);
        ApprenticeDuty.addCondition(new CondHasMaster());
        ApprenticeDuty.addCondition(new CondMasterCultivating());
        ApprenticeDuty.addTask(ActorTasks.RequestTeaching.id);
        ApprenticeDuty.addCondition(new CondHasMaster());
        ApprenticeDuty.addCondition(new CondNeedTeaching());
        ApprenticeDuty.addTask(ActorTasks.SeekMaster.id);
        ApprenticeDuty.addCondition(new CondNeedMaster());
        ApprenticeDuty.addCondition(new CondHasMaster(), false);
        ApprenticeDuty.addTask(ActorTasks.EndJob.id);
    }
}
```

---

## UIç•Œé¢è®¾è®¡

### 9.1 å¸ˆå¾’ä¿¡æ¯é¡µé¢ (MasterApprenticePage)

æ˜¾ç¤ºè§’è‰²çš„å¸ˆå¾’å…³ç³»ä¿¡æ¯ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã€å¸ˆå¾’å…³ç³»ã€‘                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜… å¸ˆå‚…ä¿¡æ¯                           â”‚
â”‚   å¸ˆå‚…: å¼ ä¸‰ä¸° (æ­¦å½“æ´¾å®—ä¸»)             â”‚
â”‚   å…³ç³»: äº²ä¼ å¼Ÿå­                       â”‚
â”‚   äº²å¯†åº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 85%            â”‚
â”‚   æ‹œå¸ˆæ—¶é—´: 100å¹´å‰                   â”‚
â”‚                                      â”‚
â”‚   å·²è·ä¼ æ‰¿:                           â”‚
â”‚     âœ“ å¤ªææ‹³æ³• (æŒæ¡65%)              â”‚
â”‚     âœ“ çº¯é˜³æ— æåŠŸ (æŒæ¡42%)            â”‚
â”‚     âœ“ å¤ªæå‰‘ (å·²ä¹ å¾—)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—‹ å¼Ÿå­åˆ—è¡¨ (3/5)                     â”‚
â”‚   1. å®‹é’ä¹¦ - å…¥å®¤å¼Ÿå­ (äº²å¯†åº¦: 60%)   â”‚
â”‚   2. å®‹è¿œæ¡¥ - äº²ä¼ å¼Ÿå­ (äº²å¯†åº¦: 78%)   â”‚
â”‚   3. [è¡£é’µ] å¼ æ— å¿Œ - è¡£é’µä¼ äºº (95%)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—‹ åŒé—¨                              â”‚
â”‚   - ä¿å²±å²© (å¸ˆå…„)                     â”‚
â”‚   - æ®·æ¢¨äº­ (å¸ˆå¼Ÿ)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 æ‹œå¸ˆç•Œé¢ (ApprenticeWindow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ã€æ‹œå¸ˆä»ªå¼ã€‘                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚   å¸ˆå‚…: å¼ ä¸‰ä¸°                        â”‚
â”‚   å¢ƒç•Œ: å…ƒå©´åæœŸ                       â”‚
â”‚   å®—é—¨: æ­¦å½“æ´¾                        â”‚
â”‚                                      â”‚
â”‚   å¯ä¼ æˆåŠŸæ³•:                         â”‚
â”‚     â€¢ å¤ªææ‹³æ³• (å¤©çº§)                  â”‚
â”‚     â€¢ çº¯é˜³æ— æåŠŸ (åœ°çº§)                â”‚
â”‚                                      â”‚
â”‚   å¯ä¼ æˆæŠ€èƒ½:                         â”‚
â”‚     â€¢ å¤ªæå‰‘                          â”‚
â”‚     â€¢ ç»µæŒ                           â”‚
â”‚                                      â”‚
â”‚   æ‹œå¸ˆæˆåŠŸç‡: 85%                     â”‚
â”‚   (çµæ ¹å¥‘åˆ: è‰¯å¥½)                    â”‚
â”‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     [ç¡®è®¤æ‹œå¸ˆ]      [å–æ¶ˆ]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.3 ä¼ æˆç•Œé¢ (TeachingWindow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ã€ä¼ æˆåŠŸæ³•ã€‘                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¸ˆå‚…: å¼ ä¸‰ä¸°                          â”‚
â”‚ å¼Ÿå­: å¼ æ— å¿Œ                          â”‚
â”‚                                      â”‚
â”‚ é€‰æ‹©ä¼ æˆå†…å®¹:                         â”‚
â”‚                                      â”‚
â”‚ â—‹ åŠŸæ³•ä¼ æˆ                           â”‚
â”‚   â–¡ å¤ªææ‹³æ³•      é¢„è®¡è·å¾—: 35%       â”‚
â”‚   â˜‘ çº¯é˜³æ— æåŠŸ    é¢„è®¡è·å¾—: 28%       â”‚
â”‚                                      â”‚
â”‚ â—‹ æŠ€èƒ½ä¼ æˆ                           â”‚
â”‚   â–¡ å¤ªæå‰‘        ä¼ æˆæ•ˆç‡: é«˜        â”‚
â”‚   â–¡ ç»µæŒ          ä¼ æˆæ•ˆç‡: ä¸­        â”‚
â”‚                                      â”‚
â”‚ ä¼ æˆè€—æ—¶: çº¦3å¤©                       â”‚
â”‚ ä¼ æ‰¿æ•ˆç‡: 112% (è¡£é’µä¼ äººåŠ æˆ)          â”‚
â”‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     [å¼€å§‹ä¼ æˆ]      [å–æ¶ˆ]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.4 å®—é—¨å¸ˆå¾’è°± (SectLineageWindow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ­¦å½“æ´¾å¸ˆå¾’ä¼ æ‰¿è°±ç³»                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚                    å¼ ä¸‰ä¸° (ç¥–å¸ˆ)                       â”‚
â”‚                        â”‚                             â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚      â”‚      â”‚      â”‚      â”‚               â”‚
â”‚       å®‹è¿œæ¡¥  ä¿è²èˆŸ  ä¿å²±å²©  å¼ æ¾æºª  æ®·æ¢¨äº­             â”‚
â”‚         â”‚             â”‚                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”    â”Œâ”€â”€â”´â”€â”€â”                          â”‚
â”‚    â”‚         â”‚    â”‚     â”‚                           â”‚
â”‚   å®‹é’ä¹¦    å¼ æ— å¿Œ ...   ...                          â”‚
â”‚   (å…¥å®¤)   (è¡£é’µ)                                    â”‚
â”‚                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å®—é—¨äººæ•°: 127äºº                                       â”‚
â”‚ å¸ˆå¾’å¯¹æ•°: 45å¯¹                                        â”‚
â”‚ å¹³å‡è¾ˆåˆ†: 3.2ä»£                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€æœ¯å®ç°

### 10.1 æ–°å¢æ–‡ä»¶åˆ—è¡¨

```
Source/Content/
â”œâ”€â”€ Components/
â”‚   â”œâ”€â”€ MasterApprenticeRelation.cs    # å¸ˆå¾’å…³ç³»ç»„ä»¶
â”‚   â”œâ”€â”€ MasterApprenticeState.cs       # å¸ˆå‚…çŠ¶æ€ç»„ä»¶
â”‚   â””â”€â”€ ApprenticeTask.cs              # å¼Ÿå­ä»»åŠ¡ç»„ä»¶
â”œâ”€â”€ Behaviours/
â”‚   â”œâ”€â”€ Masters/
â”‚   â”‚   â”œâ”€â”€ BehRecruitApprentice.cs    # æ”¶å¾’è¡Œä¸º
â”‚   â”‚   â”œâ”€â”€ BehTeachApprentice.cs      # ä¼ æˆè¡Œä¸º
â”‚   â”‚   â”œâ”€â”€ BehAssignTask.cs           # å¸ƒç½®ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ BehProtectApprentice.cs    # ä¿æŠ¤å¼Ÿå­
â”‚   â”‚   â””â”€â”€ BehDesignateSuccessor.cs   # æŒ‡å®šä¼ äºº
â”‚   â”œâ”€â”€ Apprentices/
â”‚   â”‚   â”œâ”€â”€ BehSeekMaster.cs           # å¯»å¸ˆè¡Œä¸º
â”‚   â”‚   â”œâ”€â”€ BehFollowMaster.cs         # è·Ÿéšå¸ˆå‚…
â”‚   â”‚   â”œâ”€â”€ BehRequestTeaching.cs      # è¯·æ•™è¡Œä¸º
â”‚   â”‚   â””â”€â”€ BehCompleteTask.cs         # å®Œæˆä»»åŠ¡
â”‚   â””â”€â”€ Conditions/
â”‚       â”œâ”€â”€ CondHasApprentice.cs       # æœ‰å¼Ÿå­
â”‚       â”œâ”€â”€ CondCanRecruit.cs          # å¯ä»¥æ”¶å¾’
â”‚       â”œâ”€â”€ CondHasMaster.cs           # æœ‰å¸ˆå‚…
â”‚       â”œâ”€â”€ CondNeedMaster.cs          # éœ€è¦å¸ˆå‚…
â”‚       â”œâ”€â”€ CondHasTask.cs             # æœ‰ä»»åŠ¡
â”‚       â””â”€â”€ CondApprenticeInDanger.cs  # å¼Ÿå­æœ‰å±é™©
â”œâ”€â”€ Extensions/
â”‚   â””â”€â”€ MasterApprenticeTools.cs       # å¸ˆå¾’ç³»ç»Ÿæ‰©å±•æ–¹æ³•
â”œâ”€â”€ Libraries/
â”‚   â”œâ”€â”€ MasterTaskAsset.cs             # å¸ˆå‚…ä»»åŠ¡èµ„æº
â”‚   â””â”€â”€ MasterTaskLibrary.cs           # å¸ˆå‚…ä»»åŠ¡åº“
â”œâ”€â”€ Systems/
â”‚   â””â”€â”€ Logic/
â”‚       â”œâ”€â”€ MasterApprenticeSystem.cs  # å¸ˆå¾’å…³ç³»ç³»ç»Ÿ
â”‚       â””â”€â”€ ApprenticeGrowthSystem.cs  # å¼Ÿå­æˆé•¿ç³»ç»Ÿ
â”œâ”€â”€ MasterApprenticeTasks.cs           # å¸ˆå¾’ä»»åŠ¡å®šä¹‰
â”œâ”€â”€ MasterApprenticeJobs.cs            # å¸ˆå¾’å·¥ä½œå®šä¹‰
â””â”€â”€ MasterApprenticeEvents.cs          # å¸ˆå¾’äº‹ä»¶å®šä¹‰

Source/Content/UI/
â””â”€â”€ CreatureInfoPages/
    â””â”€â”€ MasterApprenticePage.cs        # å¸ˆå¾’ä¿¡æ¯é¡µé¢

Source/UI/
â”œâ”€â”€ ApprenticeWindow.cs                # æ‹œå¸ˆç•Œé¢
â”œâ”€â”€ TeachingWindow.cs                  # ä¼ æˆç•Œé¢
â””â”€â”€ SectLineageWindow.cs               # å®—é—¨å¸ˆå¾’è°±

Content/
â””â”€â”€ MasterTasks/
    â””â”€â”€ MasterTasks.json               # å¸ˆå‚…ä»»åŠ¡é…ç½®

Locales/
â””â”€â”€ master_apprentice.csv              # å¸ˆå¾’ç³»ç»Ÿæœ¬åœ°åŒ–
```

### 10.2 ActorExtend æ‰©å±•

```csharp
// æ‰©å±• Source/Content/Extensions/MasterApprenticeTools.cs

public static class MasterApprenticeTools
{
    // ======== å¸ˆå‚…ç›¸å…³æ–¹æ³• ========
    
    /// <summary>
    /// æ£€æŸ¥æ˜¯å¦å¯ä»¥æ”¶å¾’
    /// </summary>
    public static bool CanRecruit(this ActorExtend ae)
    {
        // æ£€æŸ¥å¢ƒç•Œ
        if (!ae.HasCultisys<Xian>()) return false;
        ref var xian = ref ae.GetCultisys<Xian>();
        if (xian.level < XianLevels.JiDan) return false;  // è‡³å°‘ç­‘åŸº
        
        // æ£€æŸ¥åŠŸæ³•æŒæ¡
        var mainCultibook = ae.GetMainCultibook();
        if (mainCultibook == null) return false;
        if (ae.GetMainCultibookMastery() < 40) return false;
        
        // æ£€æŸ¥å¼Ÿå­æ•°é‡
        if (!ae.TryGetComponent(out MasterApprenticeState state)) return true;
        return state.ApprenticeCount < state.MaxApprenticeCount;
    }
    
    /// <summary>
    /// è·å–æœ€å¤§å¼Ÿå­æ•°é‡
    /// </summary>
    public static int GetMaxApprenticeCount(this ActorExtend ae)
    {
        if (!ae.HasCultisys<Xian>()) return 0;
        ref var xian = ref ae.GetCultisys<Xian>();
        
        return xian.level switch
        {
            >= XianLevels.HuaShen => 999,
            >= XianLevels.YuanYing => 10,
            >= XianLevels.JinDan => 5,
            >= XianLevels.ZhuJi => 2,
            _ => 0
        };
    }
    
    /// <summary>
    /// æ”¶å–å¼Ÿå­
    /// </summary>
    public static bool TryRecruit(this ActorExtend master, ActorExtend apprentice, 
        MasterApprenticeType type = MasterApprenticeType.Nominal)
    {
        if (!master.CanRecruit()) return false;
        if (apprentice.HasMaster()) return false;
        
        // è®¡ç®—æˆåŠŸç‡
        float successRate = CalculateRecruitSuccessRate(master, apprentice);
        if (!Randy.randomChance(successRate)) return false;
        
        // å»ºç«‹å…³ç³»
        apprentice.E.AddRelation(new MasterApprenticeRelation
        {
            Master = master.E,
            RelationType = type,
            Intimacy = 0,
            ApprenticeTime = World.world.getCurWorldTime(),
            TransferredCultibookCount = 0,
            TransferredSkillCount = 0,
            IsSuccessor = false
        });
        
        // æ›´æ–°å¸ˆå‚…çŠ¶æ€
        ref var state = ref master.GetOrAddComponent<MasterApprenticeState>();
        state.ApprenticeCount++;
        if (state.MaxApprenticeCount == 0)
        {
            state.MaxApprenticeCount = master.GetMaxApprenticeCount();
        }
        
        // è§¦å‘äº‹ä»¶
        MasterApprenticeEvents.OnRecruit(master, apprentice);
        
        return true;
    }
    
    /// <summary>
    /// ä¼ æˆåŠŸæ³•
    /// </summary>
    public static bool TeachCultibook(this ActorExtend master, ActorExtend apprentice, 
        CultibookAsset cultibook)
    {
        // æ£€æŸ¥å¸ˆå‚…æ˜¯å¦æŒæ¡è¯¥åŠŸæ³•
        var masterMastery = master.GetMaster(cultibook);
        if (masterMastery <= 0) return false;
        
        // è®¡ç®—ä¼ æ‰¿æ•ˆç‡
        float efficiency = CalculateTeachEfficiency(master, apprentice);
        
        // è®¡ç®—å¼Ÿå­è·å¾—çš„æŒæ¡åº¦
        float gainedMastery = Mathf.Min(masterMastery * efficiency, 80f);
        
        // æ›´æ–°å¼Ÿå­åŠŸæ³•çŠ¶æ€
        var currentMastery = apprentice.GetMaster(cultibook);
        if (currentMastery <= 0)
        {
            // æ–°å­¦åŠŸæ³•
            if (apprentice.GetMainCultibook() == null)
            {
                apprentice.SetMainCultibook(cultibook);
                apprentice.AddMainCultibookMastery(gainedMastery);
            }
            apprentice.Master(cultibook, gainedMastery);
        }
        else
        {
            // å·²æœ‰åŠŸæ³•ï¼Œå¢åŠ æŒæ¡åº¦
            apprentice.Master(cultibook, Mathf.Max(currentMastery, gainedMastery));
        }
        
        // æ›´æ–°å¸ˆå¾’å…³ç³»
        UpdateRelationAfterTeaching(master, apprentice);
        
        return true;
    }
    
    // ======== å¼Ÿå­ç›¸å…³æ–¹æ³• ========
    
    /// <summary>
    /// æ£€æŸ¥æ˜¯å¦æœ‰å¸ˆå‚…
    /// </summary>
    public static bool HasMaster(this ActorExtend ae)
    {
        return ae.E.GetRelations<MasterApprenticeRelation>().Any();
    }
    
    /// <summary>
    /// è·å–å¸ˆå‚…
    /// </summary>
    public static ActorExtend GetMaster(this ActorExtend ae)
    {
        var relations = ae.E.GetRelations<MasterApprenticeRelation>();
        if (!relations.Any()) return null;
        
        var masterEntity = relations.First().Master;
        if (masterEntity.IsNull) return null;
        
        return masterEntity.GetComponent<ActorBinder>()._ae;
    }
    
    /// <summary>
    /// è·å–å¸ˆå¾’å…³ç³»
    /// </summary>
    public static ref MasterApprenticeRelation GetMasterRelation(this ActorExtend ae)
    {
        return ref ae.E.GetRelations<MasterApprenticeRelation>().First();
    }
    
    /// <summary>
    /// å¢åŠ äº²å¯†åº¦
    /// </summary>
    public static void AddIntimacy(this ActorExtend ae, float amount)
    {
        if (!ae.HasMaster()) return;
        ref var relation = ref ae.GetMasterRelation();
        relation.Intimacy = Mathf.Clamp(relation.Intimacy + amount, 0, 100);
        
        // æ£€æŸ¥æ˜¯å¦å‡çº§å…³ç³»ç±»å‹
        UpdateRelationType(ref relation);
    }
    
    /// <summary>
    /// å°è¯•å‡ºå¸ˆ
    /// </summary>
    public static bool TryGraduate(this ActorExtend ae)
    {
        if (!ae.HasMaster()) return false;
        
        var master = ae.GetMaster();
        ref var relation = ref ae.GetMasterRelation();
        
        // æ£€æŸ¥å‡ºå¸ˆæ¡ä»¶
        // 1. å¢ƒç•Œè¾¾åˆ°å¸ˆå‚…å¢ƒç•Œ
        // 2. æˆ–åŠŸæ³•æŒæ¡è¾¾åˆ°100%
        bool canGraduate = false;
        
        if (ae.HasCultisys<Xian>() && master.HasCultisys<Xian>())
        {
            ref var apprenticeXian = ref ae.GetCultisys<Xian>();
            ref var masterXian = ref master.GetCultisys<Xian>();
            canGraduate = apprenticeXian.level >= masterXian.level;
        }
        
        if (!canGraduate)
        {
            canGraduate = ae.GetMainCultibookMastery() >= 100;
        }
        
        if (!canGraduate) return false;
        
        // æ‰§è¡Œå‡ºå¸ˆ
        MasterApprenticeEvents.OnGraduate(master, ae);
        
        // ç§»é™¤å¸ˆå¾’å…³ç³»ï¼Œè½¬ä¸ºåŒé—¨å…³ç³»
        ae.E.RemoveRelation<MasterApprenticeRelation>(master.E);
        
        // æ›´æ–°å¸ˆå‚…çŠ¶æ€
        ref var state = ref master.GetComponent<MasterApprenticeState>();
        state.ApprenticeCount--;
        
        return true;
    }
    
    // ======== è¾…åŠ©æ–¹æ³• ========
    
    private static float CalculateRecruitSuccessRate(ActorExtend master, ActorExtend apprentice)
    {
        float baseRate = 0.7f;
        
        // çµæ ¹å¥‘åˆåº¦
        var mainCultibook = master.GetMainCultibook();
        float affinityBonus = 0;
        if (mainCultibook != null && apprentice.HasElementRoot())
        {
            affinityBonus = mainCultibook.ElementReq.GetAffinity(apprentice.GetElementRoot()) * 0.2f;
        }
        
        // å…³ç³»ç³»æ•°
        float relationBonus = 0; // TODO: è·å–åŒæ–¹å…³ç³»å€¼
        
        // æ™ºåŠ›ç³»æ•°
        float intelligenceBonus = apprentice.GetStat(S.intelligence) / 50f * 0.1f;
        
        return Mathf.Clamp01(baseRate + affinityBonus + relationBonus + intelligenceBonus);
    }
    
    private static float CalculateTeachEfficiency(ActorExtend master, ActorExtend apprentice)
    {
        float baseEfficiency = 0.3f;
        
        // å…³ç³»ç³»æ•°
        ref var relation = ref apprentice.GetMasterRelation();
        float relationMultiplier = relation.RelationType switch
        {
            MasterApprenticeType.Nominal => 0.5f,
            MasterApprenticeType.Formal => 0.8f,
            MasterApprenticeType.Direct => 1.0f,
            MasterApprenticeType.Successor => 1.2f,
            _ => 0.5f
        };
        
        // æ™ºåŠ›ç³»æ•°
        float intelligenceMultiplier = 
            (master.GetStat(S.intelligence) + apprentice.GetStat(S.intelligence)) / 100f;
        
        return baseEfficiency * relationMultiplier * intelligenceMultiplier;
    }
    
    private static void UpdateRelationType(ref MasterApprenticeRelation relation)
    {
        relation.RelationType = relation.Intimacy switch
        {
            >= 90 when relation.IsSuccessor => MasterApprenticeType.Successor,
            >= 60 => MasterApprenticeType.Direct,
            >= 30 => MasterApprenticeType.Formal,
            _ => MasterApprenticeType.Nominal
        };
    }
    
    private static void UpdateRelationAfterTeaching(ActorExtend master, ActorExtend apprentice)
    {
        ref var relation = ref apprentice.GetMasterRelation();
        relation.TransferredCultibookCount++;
        relation.Intimacy = Mathf.Min(relation.Intimacy + 2, 100);
        UpdateRelationType(ref relation);
    }
}
```

### 10.3 äº‹ä»¶ç³»ç»Ÿ

```csharp
// Source/Content/MasterApprenticeEvents.cs

public static class MasterApprenticeEvents
{
    /// <summary>
    /// æ”¶å¾’äº‹ä»¶
    /// </summary>
    public static void OnRecruit(ActorExtend master, ActorExtend apprentice)
    {
        // äº§ç”Ÿä¸–ç•Œæ—¥å¿—
        WorldLogs.LogMasterRecruit(master.Base, apprentice.Base);
        
        // è§¦å‘å®—é—¨äº‹ä»¶ï¼ˆå¦‚æœåœ¨å®—é—¨å†…ï¼‰
        if (master.sect != null)
        {
            master.sect.OnMemberRecruit(master.Base, apprentice.Base);
        }
    }
    
    /// <summary>
    /// ä¼ æˆäº‹ä»¶
    /// </summary>
    public static void OnTeach(ActorExtend master, ActorExtend apprentice, string contentType)
    {
        WorldLogs.LogMasterTeach(master.Base, apprentice.Base, contentType);
    }
    
    /// <summary>
    /// å‡ºå¸ˆäº‹ä»¶
    /// </summary>
    public static void OnGraduate(ActorExtend master, ActorExtend apprentice)
    {
        WorldLogs.LogApprenticeGraduate(master.Base, apprentice.Base);
    }
    
    /// <summary>
    /// å›å¸ˆäº‹ä»¶
    /// </summary>
    public static void OnBetray(ActorExtend master, ActorExtend apprentice)
    {
        WorldLogs.LogApprenticeBetray(master.Base, apprentice.Base);
        
        // æˆä¸ºå¸ˆé—¨æ•Œäºº
        // TODO: å®ç°æ•Œå¯¹å…³ç³»
    }
    
    /// <summary>
    /// è¡£é’µä¼ æ‰¿äº‹ä»¶
    /// </summary>
    public static void OnSuccession(ActorExtend master, ActorExtend successor)
    {
        WorldLogs.LogSuccession(master.Base, successor.Base);
        
        // ä¼ æ‰¿æ‰€æœ‰æ ¸å¿ƒå†…å®¹
        TransferAllCoreContent(master, successor);
    }
}
```

---

## å¼€å‘TODO

### é˜¶æ®µä¸€ï¼šæ ¸å¿ƒæ¡†æ¶ (é¢„è®¡1å‘¨) âœ… **å·²å®Œæˆ**

- [x] **T1.1** åˆ›å»º `MasterApprenticeRelation` ç»„ä»¶ âœ…
  - [x] å®šä¹‰å…³ç³»ç±»å‹æšä¸¾ (`MasterApprenticeType`)
  - [x] å®ç° `ILinkRelation` æ¥å£
  - [x] æ·»åŠ äº²å¯†åº¦ã€ä¼ æ‰¿è®°å½•ç­‰å­—æ®µ
  - **ä½ç½®**: `Source/Core/Components/MasterApprenticeRelation.cs`

- [x] **T1.2** åˆ›å»º `MasterApprenticeState` ç»„ä»¶ âœ…
  - [x] å¼Ÿå­æ•°é‡ç®¡ç†
  - [x] æœ€å¤§å¼Ÿå­æ•°é‡è®¡ç®—
  - [x] å¸ˆé—¨é£æ ¼å®šä¹‰ (`MasterStyle`)
  - **ä½ç½®**: `Source/Core/Components/MasterApprenticeState.cs`

- [x] **T1.3** æ‰©å±• `ActorExtend` - åŸºç¡€æ–¹æ³• âœ…
  - [x] `HasMaster()` - æ£€æŸ¥æ˜¯å¦æœ‰å¸ˆå‚…
  - [x] `GetMaster()` - è·å–å¸ˆå‚…
  - [x] `GetApprentices()` - è·å–å¼Ÿå­åˆ—è¡¨
  - [x] `CanRecruit()` - æ£€æŸ¥æ˜¯å¦å¯æ”¶å¾’
  - [x] `GetMaxApprenticeCount()` - è·å–æœ€å¤§å¼Ÿå­æ•°
  - **ä½ç½®**: `Source/Content/Extensions/MasterApprenticeTools.cs`

- [x] **T1.4** æ‰©å±• `ActorExtend` - æ ¸å¿ƒæ–¹æ³• âœ…
  - [x] `TryRecruit()` - æ”¶å¾’æ–¹æ³•
  - [x] `AddIntimacy()` - å¢åŠ äº²å¯†åº¦
  - [x] `UpdateRelationType()` - æ›´æ–°å…³ç³»ç±»å‹ï¼ˆå†…éƒ¨æ–¹æ³•ï¼‰
  - [x] `GetIntimacy()` - è·å–äº²å¯†åº¦
  - [x] `GetRelationType()` - è·å–å…³ç³»ç±»å‹
  - [x] `TryGraduate()` - å‡ºå¸ˆæ–¹æ³•
  - **ä½ç½®**: `Source/Content/Extensions/MasterApprenticeTools.cs`

### é˜¶æ®µäºŒï¼šä¼ æ‰¿ç³»ç»Ÿ (é¢„è®¡1.5å‘¨) âš ï¸ **éƒ¨åˆ†å®Œæˆ**

- [x] **T2.1** åŠŸæ³•ä¼ æ‰¿å®ç° âœ…
  - [x] `TeachCultibook()` - ä¼ æˆåŠŸæ³•
  - [x] ä¼ æ‰¿æ•ˆç‡è®¡ç®— (`CalculateTeachEfficiency`)
  - [x] ä¼ æ‰¿é™åˆ¶æ£€æŸ¥
  - **ä½ç½®**: `Source/Content/Extensions/MasterApprenticeTools.cs`

- [ ] **T2.2** æŠ€èƒ½ä¼ æ‰¿å®ç°
  - [ ] `TeachSkill()` - ä¼ æˆæŠ€èƒ½
  - [ ] å£æˆå¿ƒä¼ æ–¹å¼
  - [ ] å®æˆ˜æ•™å­¦æ–¹å¼

- [ ] **T2.3** ä¸¹æ–¹ä¼ æ‰¿å®ç°
  - [ ] `TeachElixir()` - ä¼ æˆä¸¹æ–¹
  - [ ] ä¼ æ‰¿æ¡ä»¶æ£€æŸ¥

- [ ] **T2.4** ä¿®ç‚¼ç»éªŒä¼ æ‰¿
  - [ ] ä¼ æˆä¿®ç‚¼å¿ƒå¾—
  - [ ] ä¼ æˆæˆ˜æ–—æŠ€å·§
  - [ ] æ•ˆæœå®ç°

### é˜¶æ®µä¸‰ï¼šAIè¡Œä¸ºç³»ç»Ÿ (é¢„è®¡1.5å‘¨) âœ… **å·²å®Œæˆ**

- [x] **T3.1** å¸ˆå‚…è¡Œä¸º âœ…
  - [x] `BehRecruitApprentice` - æ”¶å¾’è¡Œä¸º
  - [x] `BehTeachApprentice` - ä¼ æˆè¡Œä¸º
  - [ ] `BehAssignTask` - å¸ƒç½®ä»»åŠ¡ï¼ˆæœªå®ç°ï¼‰
  - [ ] `BehProtectApprentice` - ä¿æŠ¤å¼Ÿå­ï¼ˆæœªå®ç°ï¼‰
  - [ ] `BehDesignateSuccessor` - æŒ‡å®šä¼ äººï¼ˆæœªå®ç°ï¼‰
  - **ä½ç½®**: `Source/Content/Behaviours/Masters/`

- [x] **T3.2** å¼Ÿå­è¡Œä¸º âœ…
  - [x] `BehSeekMaster` - å¯»å¸ˆè¡Œä¸º
  - [x] `BehFollowMaster` - è·Ÿéšå¸ˆå‚…
  - [ ] `BehRequestTeaching` - è¯·æ•™è¡Œä¸ºï¼ˆæœªå®ç°ï¼‰
  - [ ] `BehCompleteTask` - å®Œæˆä»»åŠ¡ï¼ˆæœªå®ç°ï¼‰
  - **ä½ç½®**: `Source/Content/Behaviours/Apprentices/`

- [x] **T3.3** æ¡ä»¶ç±»å®ç° âœ…
  - [x] `CondHasApprentice`
  - [x] `CondCanRecruit`
  - [x] `CondHasMaster`
  - [x] `CondNeedMaster`
  - [x] `CondApprenticeNeedTeaching`
  - [x] `CondMasterCultivating`
  - [ ] `CondHasTask`ï¼ˆæœªå®ç°ï¼‰
  - [ ] `CondApprenticeInDanger`ï¼ˆæœªå®ç°ï¼‰
  - **ä½ç½®**: `Source/Content/Behaviours/Conditions/`

- [x] **T3.4** ActorJob é…ç½® âœ…
  - [x] `MasterDuty` - å¸ˆå‚…å·¥ä½œ
  - [x] `ApprenticeDuty` - å¼Ÿå­å·¥ä½œ
  - [x] é›†æˆåˆ°ç°æœ‰å·¥ä½œç³»ç»Ÿ
  - [x] åœ¨ `PatchActor.cs` ä¸­æ·»åŠ å·¥ä½œåˆ†é…é€»è¾‘ï¼ˆä»…å…ƒå©´æœŸæ”¶å¾’ï¼‰
  - **ä½ç½®**: `Source/Content/ActorJobs.cs`, `Source/Content/Patch/PatchActor.cs`

### é˜¶æ®µå››ï¼šå¸ˆå¾’äº’åŠ¨ç³»ç»Ÿ (é¢„è®¡1å‘¨)

- [ ] **T4.1** æ—¥å¸¸äº’åŠ¨å®ç°
  - [ ] è·Ÿéšä¿®ç‚¼é€»è¾‘
  - [ ] è¯·æ•™é—®é¢˜é€»è¾‘
  - [ ] å¸ƒç½®ä»»åŠ¡é€»è¾‘

- [ ] **T4.2** é‡è¦äº‹ä»¶å®ç°
  - [ ] ä¼ æˆä»ªå¼
  - [ ] å…¥å®¤ç¤¼
  - [ ] å‡ºå¸ˆç¤¼
  - [ ] è¡£é’µä¼ æ‰¿

- [ ] **T4.3** äº‹ä»¶ç³»ç»Ÿ
  - [ ] `MasterApprenticeEvents` å®ç°
  - [ ] ä¸–ç•Œæ—¥å¿—é›†æˆ
  - [ ] å®—é—¨äº‹ä»¶è§¦å‘

### é˜¶æ®µäº”ï¼šå®—é—¨é›†æˆ (é¢„è®¡1å‘¨)

- [ ] **T5.1** æ‰©å±• `SectData`
  - [ ] æ·»åŠ å¸ˆå¾’å…³ç³»å›¾
  - [ ] æ·»åŠ å®—é—¨èŒä½ç³»ç»Ÿ
  - [ ] æ·»åŠ å®—é—¨åŠŸæ³•åˆ—è¡¨

- [ ] **T5.2** æ‰©å±• `Sect` ç±»
  - [ ] å®—é—¨å¸ˆå¾’ç®¡ç†æ–¹æ³•
  - [ ] å®—é—¨ä¼ æ‰¿è§„åˆ™
  - [ ] è´¡çŒ®ç‚¹ç³»ç»Ÿ

- [ ] **T5.3** å®—é—¨ç‰¹æœ‰è¡Œä¸º
  - [ ] å®—é—¨æ”¶å¾’
  - [ ] å®—é—¨ä¼ æˆ
  - [ ] å®—é—¨ä»»åŠ¡åˆ†é…

### é˜¶æ®µå…­ï¼šUIå®ç° (é¢„è®¡1å‘¨)

- [ ] **T6.1** `MasterApprenticePage` å®ç°
  - [ ] å¸ˆå‚…ä¿¡æ¯æ˜¾ç¤º
  - [ ] å¼Ÿå­åˆ—è¡¨æ˜¾ç¤º
  - [ ] åŒé—¨æ˜¾ç¤º

- [ ] **T6.2** `ApprenticeWindow` å®ç°
  - [ ] æ‹œå¸ˆç•Œé¢
  - [ ] æ‹œå¸ˆç¡®è®¤é€»è¾‘

- [ ] **T6.3** `TeachingWindow` å®ç°
  - [ ] ä¼ æˆå†…å®¹é€‰æ‹©
  - [ ] ä¼ æˆé¢„è§ˆ

- [ ] **T6.4** `SectLineageWindow` å®ç°
  - [ ] å¸ˆå¾’è°±ç³»å›¾
  - [ ] å…³ç³»å¯è§†åŒ–

### é˜¶æ®µä¸ƒï¼šæœ¬åœ°åŒ–ä¸é…ç½® (é¢„è®¡0.5å‘¨) âš ï¸ **éƒ¨åˆ†å®Œæˆ**

- [x] **T7.1** æœ¬åœ°åŒ– âœ…
  - [x] ä»»åŠ¡æœ¬åœ°åŒ–ï¼ˆåœ¨ `tasks.csv` ä¸­æ·»åŠ å¸ˆå¾’ä»»åŠ¡ï¼‰
    - [x] `Task.Unit.Cultiway.RecruitApprentice` - æ”¶å¾’
    - [x] `Task.Unit.Cultiway.TeachApprentice` - ä¼ æˆå¼Ÿå­
    - [x] `Task.Unit.Cultiway.SeekMaster` - å¯»å¸ˆ
    - [x] `Task.Unit.Cultiway.FollowMaster` - è·Ÿéšå¸ˆå‚…
  - [ ] åˆ›å»º `master_apprentice.csv`ï¼ˆæœªå®ç°ï¼‰
  - [ ] æ‰€æœ‰UIæ–‡æœ¬æœ¬åœ°åŒ–ï¼ˆéƒ¨åˆ†å®Œæˆï¼ŒUIç»„ä»¶å­˜åœ¨ä½†åŠŸèƒ½å¾…å®Œå–„ï¼‰
  - [ ] äº‹ä»¶æ—¥å¿—æœ¬åœ°åŒ–ï¼ˆæœªå®ç°ï¼‰
  - **ä½ç½®**: `Locales/tasks.csv`

- [ ] **T7.2** é…ç½®æ–‡ä»¶
  - [ ] å¸ˆå‚…ä»»åŠ¡é…ç½®ï¼ˆæœªå®ç°ï¼‰
  - [ ] å…³ç³»å‚æ•°é…ç½®ï¼ˆå½“å‰ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ï¼‰
  - [ ] ä¼ æ‰¿æ•ˆç‡é…ç½®ï¼ˆå½“å‰ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ï¼‰

### é˜¶æ®µå…«ï¼šæµ‹è¯•ä¸å¹³è¡¡ (é¢„è®¡0.5å‘¨)

- [ ] **T8.1** åŠŸèƒ½æµ‹è¯•
  - [ ] æ‹œå¸ˆæµç¨‹æµ‹è¯•
  - [ ] ä¼ æ‰¿æµç¨‹æµ‹è¯•
  - [ ] å‡ºå¸ˆæµç¨‹æµ‹è¯•
  - [ ] AIè¡Œä¸ºæµ‹è¯•

- [ ] **T8.2** å¹³è¡¡æ€§è°ƒæ•´
  - [ ] æ”¶å¾’æ¡ä»¶è°ƒæ•´
  - [ ] ä¼ æ‰¿æ•ˆç‡è°ƒæ•´
  - [ ] äº²å¯†åº¦å¢é•¿è°ƒæ•´

---

## æ—¶é—´ä¼°ç®—

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ |
|-----|------|---------|
| é˜¶æ®µä¸€ | æ ¸å¿ƒæ¡†æ¶ | 1å‘¨ |
| é˜¶æ®µäºŒ | ä¼ æ‰¿ç³»ç»Ÿ | 1.5å‘¨ |
| é˜¶æ®µä¸‰ | AIè¡Œä¸ºç³»ç»Ÿ | 1.5å‘¨ |
| é˜¶æ®µå›› | å¸ˆå¾’äº’åŠ¨ç³»ç»Ÿ | 1å‘¨ |
| é˜¶æ®µäº” | å®—é—¨é›†æˆ | 1å‘¨ |
| é˜¶æ®µå…­ | UIå®ç° | 1å‘¨ |
| é˜¶æ®µä¸ƒ | æœ¬åœ°åŒ–ä¸é…ç½® | 0.5å‘¨ |
| é˜¶æ®µå…« | æµ‹è¯•ä¸å¹³è¡¡ | 0.5å‘¨ |
| **æ€»è®¡** | | **8å‘¨** |

---

## é™„å½•

### A. å¸ˆå¾’å…³ç³»ç­‰çº§å¯¹ç…§è¡¨

| äº²å¯†åº¦ | å…³ç³»ç±»å‹ | ä¼ æ‰¿æ•ˆç‡ | å¯å­¦å†…å®¹ |
|-------|---------|---------|---------|
| 0-30 | è®°åå¼Ÿå­ | 50% | åŸºç¡€åŠŸæ³• |
| 30-60 | å…¥å®¤å¼Ÿå­ | 80% | æ ¸å¿ƒåŠŸæ³• |
| 60-90 | äº²ä¼ å¼Ÿå­ | 100% | å…¨éƒ¨åŠŸæ³• |
| 90-100 | è¡£é’µä¼ äºº | 120% | ç§˜ä¼ ç»å­¦ |

### B. å¢ƒç•Œä¸å¼Ÿå­æ•°é‡é™åˆ¶

| å¢ƒç•Œ | æœ€å¤§å¼Ÿå­æ•° | è¯´æ˜ |
|-----|-----------|------|
| ç»ƒæ°” | 0 | ä¸èƒ½æ”¶å¾’ |
| ç­‘åŸº | 2 | åˆæ­¥å¯æ”¶å¾’ |
| é‡‘ä¸¹ | 5 | æ­£å¸¸æ”¶å¾’ |
| å…ƒå©´ | 10 | å¯ç»„å»ºå¸ˆé—¨ |
| åŒ–ç¥+ | æ— é™ | åˆ›ç«‹å®—æ´¾ |

### C. ä¼ æ‰¿æ•ˆç‡è®¡ç®—å…¬å¼

```
ä¼ æ‰¿æ•ˆç‡ = åŸºç¡€æ•ˆç‡ Ã— å…³ç³»ç³»æ•° Ã— å¸ˆå‚…æŒæ¡åº¦ Ã— æ™ºåŠ›ç³»æ•°

åŸºç¡€æ•ˆç‡ = 0.3
å…³ç³»ç³»æ•° = 
  - è®°åå¼Ÿå­: 0.5
  - å…¥å®¤å¼Ÿå­: 0.8
  - äº²ä¼ å¼Ÿå­: 1.0
  - è¡£é’µä¼ äºº: 1.2
å¸ˆå‚…æŒæ¡åº¦ = å¸ˆå‚…å¯¹è¯¥å†…å®¹çš„æŒæ¡ç¨‹åº¦ / 100
æ™ºåŠ›ç³»æ•° = (å¸ˆå‚…æ™ºåŠ› + å¼Ÿå­æ™ºåŠ›) / 100

å¼Ÿå­è·å¾—æŒæ¡åº¦ = min(å¸ˆå‚…æŒæ¡åº¦ Ã— ä¼ æ‰¿æ•ˆç‡, 80%)
```

### D. äº²å¯†åº¦å˜åŒ–è§„åˆ™

**å¢åŠ **:
| è¡Œä¸º | äº²å¯†åº¦å˜åŒ– |
|-----|-----------|
| æ—¥å¸¸è·Ÿéšä¿®ç‚¼ | +0.1/å¤© |
| å®Œæˆç®€å•ä»»åŠ¡ | +1 |
| å®Œæˆå›°éš¾ä»»åŠ¡ | +3 |
| å®Œæˆç‰¹æ®Šä»»åŠ¡ | +5 |
| å¸ˆå‚…ä¼ æˆ | +2 |
| å…±åŒæˆ˜æ–—è·èƒœ | +3 |
| ä¸ºå¸ˆé—¨è´¡çŒ® | +1~10 |

**å‡å°‘**:
| è¡Œä¸º | äº²å¯†åº¦å˜åŒ– |
|-----|-----------|
| é•¿æ—¶é—´ä¸è”ç³» | -0.05/å¤© |
| è¿èƒŒå¸ˆå‚…æ„æ„¿ | -5 |
| ä»»åŠ¡å¤±è´¥ | -1 |
| èƒŒå›å¸ˆé—¨ | -50 |
| è½¬æŠ•ä»–é—¨ | -100 |

### E. é¢„è®¾å¸ˆå‚…ä»»åŠ¡

| ä»»åŠ¡ç±»å‹ | æè¿° | å¥–åŠ±äº²å¯†åº¦ |
|---------|------|-----------|
| é‡‡é›†çµè‰ | æ”¶é›†æŒ‡å®šæ•°é‡çš„çµè‰ | +1~2 |
| çŒæ€å¦–å…½ | å‡»æ€æŒ‡å®šå¦–å…½ | +2~3 |
| é€ä¿¡ä»»åŠ¡ | ä¼ é€’æ¶ˆæ¯ç»™æŒ‡å®šäºº | +1 |
| ä¿®ç‚¼ä»»åŠ¡ | è¾¾åˆ°æŒ‡å®šä¿®ä¸º | +3~5 |
| ç‚¼ä¸¹ä»»åŠ¡ | ç‚¼åˆ¶æŒ‡å®šä¸¹è¯ | +2~3 |
| å®ˆæŠ¤ä»»åŠ¡ | å®ˆæŠ¤æŒ‡å®šåœ°ç‚¹ | +2 |
| æ¯”æ­¦ä»»åŠ¡ | ä¸åŒé—¨åˆ‡ç£‹ | +1~2 |

---

## ä¸ç°æœ‰ç³»ç»Ÿçš„å…³è”

### ä¸åŠŸæ³•ç³»ç»Ÿçš„å…³è”

- å¸ˆå‚…å¯ä»¥ä¼ æˆä¸»ä¿®åŠŸæ³•ç»™å¼Ÿå­
- ä¼ æˆæ•ˆç‡å—å¸ˆå‚…åŠŸæ³•æŒæ¡ç¨‹åº¦å½±å“
- å¼Ÿå­å¯ä»¥ä»å¸ˆå‚…å¤„å­¦ä¹ åŠŸæ³•ç›¸å…³çš„æ³•æœ¯

### ä¸å®—é—¨ç³»ç»Ÿçš„å…³è”

- å®—é—¨å†…å¯ä»¥å»ºç«‹æ­£å¼çš„å¸ˆå¾’ä½“ç³»
- å®—é—¨é•¿è€/æŒé—¨æœ‰æ”¶å¾’ç‰¹æƒ
- å®—é—¨åŠŸæ³•é€šè¿‡å¸ˆå¾’å…³ç³»ä¼ æ‰¿

### ä¸å¢ƒç•Œç³»ç»Ÿçš„å…³è”

- å¸ˆå‚…å¢ƒç•Œå†³å®šå¯æ”¶å¼Ÿå­æ•°é‡
- å¢ƒç•Œå·®è·å½±å“ä¼ æ‰¿æ•ˆç‡
- å¼Ÿå­å¢ƒç•Œè¾¾åˆ°å¸ˆå‚…å¢ƒç•Œå¯ç”³è¯·å‡ºå¸ˆ

### ä¸AIè¡Œä¸ºç³»ç»Ÿçš„å…³è”

- æ–°å¢å¸ˆå‚…/å¼Ÿå­ä¸“å±å·¥ä½œ
- ä¸ç°æœ‰ä¿®ç‚¼è¡Œä¸ºååŒ
- å¸ˆå¾’å…³ç³»å½±å“AIå†³ç­–

---

## å®ç°è¿›åº¦æ€»ç»“

### âœ… å·²å®Œæˆ

- **é˜¶æ®µä¸€ï¼šæ ¸å¿ƒæ¡†æ¶** - 100% å®Œæˆ
  - æ‰€æœ‰æ ¸å¿ƒç»„ä»¶å·²åˆ›å»ºï¼ˆ`MasterApprenticeRelation`, `MasterApprenticeState`ï¼‰
  - æ‰€æœ‰æ‰©å±•æ–¹æ³•å·²å®ç°ï¼ˆ`MasterApprenticeTools.cs`ï¼‰
  - æ•°æ®ç»“æ„å®Œæ•´ï¼Œæ”¯æŒå¸ˆå¾’å…³ç³»ç®¡ç†
  - **ç»„ä»¶ä½ç½®**: `Source/Core/Components/`

- **é˜¶æ®µä¸‰ï¼šAIè¡Œä¸ºç³»ç»Ÿ** - çº¦70% å®Œæˆ
  - æ ¸å¿ƒè¡Œä¸ºå·²å®ç°ï¼ˆæ”¶å¾’ã€ä¼ æˆã€å¯»å¸ˆã€è·Ÿéšï¼‰
  - ä¸»è¦æ¡ä»¶ç±»å·²å®ç°
  - ActorJobé…ç½®å·²å®Œæˆ
  - å·¥ä½œåˆ†é…é€»è¾‘å·²é›†æˆï¼ˆ`PatchActor.cs`ï¼Œä¸å‰¯èŒä¸špoolç»Ÿä¸€ï¼‰
  - ç¼ºå°‘ï¼šä»»åŠ¡ç³»ç»Ÿã€ä¿æŠ¤å¼Ÿå­ã€æŒ‡å®šä¼ äººç­‰é«˜çº§è¡Œä¸º
  - **ä½ç½®**: `Source/Content/Behaviours/Masters/`, `Source/Content/Behaviours/Apprentices/`

- **é˜¶æ®µäºŒï¼šä¼ æ‰¿ç³»ç»Ÿ** - çº¦25% å®Œæˆ
  - åŠŸæ³•ä¼ æ‰¿å·²å®ç°ï¼ˆ`TeachCultibook()`ï¼‰
  - ä¼ æ‰¿æ•ˆç‡è®¡ç®—å·²å®ç°
  - ç¼ºå°‘ï¼šæŠ€èƒ½ä¼ æ‰¿ã€ä¸¹æ–¹ä¼ æ‰¿ã€ä¿®ç‚¼ç»éªŒä¼ æ‰¿

- **é˜¶æ®µä¸ƒï¼šæœ¬åœ°åŒ–** - çº¦30% å®Œæˆ
  - ä»»åŠ¡æœ¬åœ°åŒ–å·²å®Œæˆï¼ˆ`Locales/tasks.csv`ï¼‰
  - UIç»„ä»¶å­˜åœ¨ä½†åŠŸèƒ½å¾…å®Œå–„ï¼ˆ`UnitMasterApprenticeElement.cs`ï¼‰
  - ç¼ºå°‘ï¼šä¸“é—¨çš„æœ¬åœ°åŒ–æ–‡ä»¶ã€äº‹ä»¶æ—¥å¿—æœ¬åœ°åŒ–

### âš ï¸ å¾…å®Œæˆ

- **é˜¶æ®µäºŒ**ï¼šæŠ€èƒ½/ä¸¹æ–¹/ä¿®ç‚¼ç»éªŒä¼ æ‰¿
- **é˜¶æ®µä¸‰**ï¼šé«˜çº§è¡Œä¸ºï¼ˆä»»åŠ¡ã€ä¿æŠ¤ã€ä¼ äººï¼‰
- **é˜¶æ®µå››**ï¼šå¸ˆå¾’äº’åŠ¨ç³»ç»Ÿï¼ˆæ—¥å¸¸äº’åŠ¨ã€é‡è¦äº‹ä»¶ï¼‰
- **é˜¶æ®µäº”**ï¼šå®—é—¨é›†æˆ
- **é˜¶æ®µå…­**ï¼šUIå®Œæ•´å®ç°
- **é˜¶æ®µä¸ƒ**ï¼šå®Œæ•´æœ¬åœ°åŒ–å’Œé…ç½®
- **é˜¶æ®µå…«**ï¼šæµ‹è¯•ä¸å¹³è¡¡

### ğŸ“ å®ç°è¯´æ˜

**ç»„ä»¶ä½ç½®å˜æ›´**ï¼š
- `MasterApprenticeRelation` å’Œ `MasterApprenticeState` ä½äº `Source/Core/Components/`ï¼ˆè€Œé `Source/Content/Components/`ï¼‰
- è¿™æ ·è®¾è®¡æ˜¯å› ä¸ºè¿™äº›æ˜¯æ ¸å¿ƒç³»ç»Ÿç»„ä»¶ï¼Œä¸ä¾èµ–Contentå±‚

**å·¥ä½œåˆ†é…æœºåˆ¶**ï¼š
- åœ¨ `PatchActor.cs` ä¸­å®ç°ï¼Œä¸å‰¯èŒä¸šç³»ç»Ÿç»Ÿä¸€ï¼ˆæ”¾å…¥pooléšæœºé€‰æ‹©ï¼‰
- åªæœ‰å…ƒå©´æœŸåŠä»¥ä¸Šæ‰ä¼šåˆ†é…å¸ˆå‚…å·¥ä½œï¼ˆä¸»åŠ¨æ”¶å¾’ï¼‰
- å¸ˆå‚…å·¥ä½œæ¦‚ç‡ï¼šæœ‰å¼Ÿå­80%ï¼Œå¯æ”¶å¾’50%
- å¼Ÿå­å·¥ä½œæ¦‚ç‡ï¼š30%

**å½“å‰é™åˆ¶**ï¼š
- ä¼ æ‰¿ç³»ç»Ÿä»…æ”¯æŒåŠŸæ³•ä¼ æ‰¿
- ç¼ºå°‘ä»»åŠ¡ç³»ç»Ÿå’Œæ›´å¤šäº’åŠ¨æ–¹å¼
- UIæ˜¾ç¤ºåŠŸèƒ½å¾…å®Œå–„
- äº‹ä»¶ç³»ç»Ÿæœªå®ç°

---

**æ–‡æ¡£ç»´æŠ¤**: è¯·åœ¨æ¯æ¬¡å¸ˆå¾’ç³»ç»Ÿæ›´æ–°åæ›´æ–°æ­¤æ–‡æ¡£  
**æœ€åæ›´æ–°**: 2025å¹´11æœˆ  
**ä¸‹æ¬¡å®¡æŸ¥**: å®Œæˆé˜¶æ®µäºŒå’Œé˜¶æ®µå››å

